<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Pull biological data from the PacFIN database — PullBDS.PacFIN • PacFIN.Utilities</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Pull biological data from the PacFIN database — PullBDS.PacFIN"><meta property="og:description" content="Pull biological data from the Comprehensive Biological Data
(comprehensive_bds_comm) table in the PacFIN database (PACFIN_MARTS). Data
are in their raw form and should be cleaned either by hand or using
cleanPacFIN()."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PacFIN.Utilities</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Pull biological data from the PacFIN database</h1>
    
    <div class="hidden name"><code>PullBDS.PacFIN.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Pull biological data from the Comprehensive Biological Data
(comprehensive_bds_comm) table in the PacFIN database (PACFIN_MARTS). Data
are in their raw form and should be cleaned either by hand or using
<code><a href="cleanPacFIN.html">cleanPacFIN()</a></code>.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">PullBDS.PacFIN</span><span class="op">(</span></span>
<span>  <span class="va">pacfin_species_code</span>,</span>
<span>  username <span class="op">=</span> <span class="fu"><a href="getUserName.html">getUserName</a></span><span class="op">(</span><span class="st">"PacFIN"</span><span class="op">)</span>,</span>
<span>  password <span class="op">=</span> <span class="fu"><a href="ask_password.html">ask_password</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  savedir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>pacfin_species_code</dt>
<dd><p>A vector of strings specifying the PacFIN species
code(s) you are interested in. This has sometimes been referred to as
<code>"SPID"</code> in legacy sql scripts. An example for sablefish would be
<code>pacfin_species_code = "SABL"</code>. Lists of species codes in <a href="https://pacfin.psmfc.org/pacfin_pub/data_rpts_pub/code_lists/sp_tree.txt" class="external-link">hierarchical order</a>,
by
<a href="https://pacfin.psmfc.org/pacfin_pub/data_rpts_pub/code_lists/agency_spcodes.txt" class="external-link">organization</a>,
and <a href="https://pacfin.psmfc.org/pacfin_pub/data_rpts_pub/code_lists/agency_spcodes_spid.txt" class="external-link">alphabetically organized</a>
can be found on the <a href="https://pacfin.psmfc.org" class="external-link">PacFIN website</a>. Often you
will want to include nominal species categories. Where, nominal (i.e.,
<a href="https://www.google.com/search?q=NOMINAL&amp;rlz=1C1GCEJ_enUS866US866&amp;sourceid=chrome&amp;ie=UTF-8" class="external-link">existing in name only</a>)
means information for a given species that is "derived" from non-species
specific information, e.g., species complexes that are split out by species
compositions like "nominal aurora rockfish" which would be <code>ARR1</code>. For some
functions, these nominal categories can automatically be added, see the
argument <code>addnominal</code>.</p></dd>


<dt>username</dt>
<dd><p>The username you would like to use to access the database.
The default is to generate <code>username</code> from your computer name where
there are rules for each supported database. Sometimes this fails because
of legacy rules that are unknown to the development team. Please email the
maintainer of this package if you need more behind-the-scenes
functionality here.</p></dd>


<dt>password</dt>
<dd><p>Your password for the database of interest. Use
<code><a href="ask_password.html">ask_password()</a></code> to be prompted for your password. Please do not share this
password with anyone or push code to a repository that has your password
saved in it.</p></dd>


<dt>savedir</dt>
<dd><p>A file path to the directory where the results will be saved.
The default is the current working directory.
The path can be relative or absolute.</p></dd>


<dt>verbose</dt>
<dd><p>A logical specifying if output should be written to the
screen or not. Good for testing and exploring your data but can be turned
off when output indicates information that you already know. The printing
of output to the screen does not affect any of the returned objects. The
default is to always print to the screen, i.e., <code>verbose = TRUE</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>An RData object is saved to the disk and the pulled data
are returned as an <code><a href="https://rdrr.io/r/base/invisible.html" class="external-link">invisible()</a></code> data frame.
The saved data can be read back in using <code><a href="https://rdrr.io/r/base/load.html" class="external-link">load()</a></code>, but note that
upon loading, the object will be named <code>bds.pacfin</code>, which is its name
inside of the <code>.RData</code> file, and thus,
the object will retain this name within your work space.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    
<div class="section">
<h3 id="data-structure">Data structure<a class="anchor" aria-label="anchor" href="#data-structure"></a></h3>


<p>Upon downloading, the data are changed from a long table to a wide table
using the combination of unique <code>FISH_ID</code> and <code>AGE_SEQUENCE_NUMBER</code>. This
change from long to wide allows for rows equating to a single fish with
columns containing information about all measurements for that fish. Multiple
age reads and information about those reads such as age reader will be in the
columns. The age read number, e.g., 1, 2, 3, 4, ..., is pasted onto the
column name separated by an underscore. So, the maximum number you see is the
maximum number of times an otolith was read in your data set. Not all double
reads are currently available within PacFIN and users should contact the
ageing labs if they wish to inform ageing-error matrices.</p>
<p><code>AGE_COUNT</code> is a somewhat cryptic column name and does not always make sense
when compared to <code>AGE_SEQUENCE_NUMBER</code>. It was determined that the former is
useful to identify how many potential agers were exposed to this fish.
For example, if <code>AGE_SEQUENCE_NUMBER</code> has a maximum value of three for a
given <code>FISH_ID</code>, then you can expect <code>AGE_COUNT</code> to be three for all three
rows in the PacFIN database for that fish. This is not always true though.
Sometimes, not all <code>AGE_SEQUENCE_NUMBER</code>s are present and they can skip
numbers for a given <code>FISH_ID</code>, and in this case, <code>AGE_COUNT</code> will be the
maximum <code>AGE_SEQUENCE_NUMBER</code> for a given <code>FISH_ID</code>.</p>
<p><code>FINAL_FISH_AGE_IN_YEARS</code> is known as the best age for a given fish.
This will not always match an age reader or be a number determinable
from the individual age reads in <code>AGE_IN_YEARS</code>. Patrick explained to me
that when age reads do not agree, particularly for younger fish, then
the senior reader will work together with the junior reader to determine
an agreed-upon age. Other times, the senior reader's value will always
be used, or it could be that together they determine that they were both
wrong and a new age is proposed as the <code>resolved age</code>. Nevertheless,
it can be quite messy and there is no way to predict the best age.</p>
<p><code>FISH_WEIGHT_GUTTED</code> is typically only available for a small subset of
samples that were sampled "purposively" by Washington state. E.g., if a
fish is weighed whole and then headed and gutted and weighed again, then
there would be two rows with the same <code>FISH_ID</code> but different <code>FISH_WEIGHT</code>
entries in the PacFIN BDS table. The downloaded data are reshaped such that
this second gutted weight is placed in <code>FISH_WEIGHT_GUTTED</code> and the fish is
represented in a single row. Granted, these purposive samples should not be
used in an assessment of the population status but they are included in the
download for completeness.</p>
</div>

<div class="section">
<h3 id="searching-for-species">Searching for species<a class="anchor" aria-label="anchor" href="#searching-for-species"></a></h3>


<p>Values passed to <code>pacfin_species_code</code> are searched for using regular
expression matching, which is different than the exact matching that is done
is <code><a href="PullCatch.PacFIN.html">PullCatch.PacFIN()</a></code>. The use of pattern matching allows for species codes
with mistakes like leading and trailing spaces to be found. This is doable in
the biological data because data for nominal species codes are few. In my
experiences these mistakes in the species codes are more common for PacFIN
species codes that are three letters rather than the standard four letters.</p>
</div>

    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index">
<ul><li><p><code><a href="cleanColumns.html">cleanColumns()</a></code> to change to legacy column names</p></li>
<li><p><code><a href="cleanPacFIN.html">cleanPacFIN()</a></code> to manipulate and subset the returned object</p></li>
</ul></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>John R. Wallace and Kelli F. Johnson</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># You will be asked for your password</span></span></span>
<span class="r-in"><span><span class="va">pd</span> <span class="op">&lt;-</span> <span class="fu">PullBDS.PacFIN</span><span class="op">(</span>pacfin_species_code <span class="op">=</span> <span class="st">"POP"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Kelli F. Johnson, Chantel R. Wetzel.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

