<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Write out composition data formatted for Stock Synthesis — writeComps • PacFIN.Utilities</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Write out composition data formatted for Stock Synthesis — writeComps"><meta property="og:description" content="Write out composition data to a file, binning the data as specified to work
in a Stock Synthesis model. Note, that this function does not work for
conditional age-at-length data because it is assumed that one would not want
to estimate growth in that way from fishery-dependent data."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PacFIN.Utilities</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.10</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/sablefish_example.html">Working through sablefish PacFIN data</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Write out composition data formatted for Stock Synthesis</h1>

    <div class="hidden name"><code>writeComps.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Write out composition data to a file, binning the data as specified to work
in a Stock Synthesis model. Note, that this function does not work for
conditional age-at-length data because it is assumed that one would not want
to estimate growth in that way from fishery-dependent data.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">writeComps</span><span class="op">(</span></span>
<span>  <span class="va">inComps</span>,</span>
<span>  fname <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  abins <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  lbins <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  comp_bins <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  column_with_input_n <span class="op">=</span> <span class="st">"n_tows"</span>,</span>
<span>  maxAge <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  month <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  partition <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  ageErr <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  dummybins <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  sum1 <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  digits <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-incomps">inComps<a class="anchor" aria-label="anchor" href="#arg-incomps"></a></dt>
<dd><p>A dataframe returned from <code><a href="getComps.html">getComps()</a></code>.</p></dd>


<dt id="arg-fname">fname<a class="anchor" aria-label="anchor" href="#arg-fname"></a></dt>
<dd><p>A filename with the appropriate extension, used to save the
function output to the disk. For example, <code>LenComps.csv</code> or
<code>file.path(getwd(), "SampleSize.csv")</code>. Full, relative, or simple paths are
allowed because the argument is used as is, i.e., not redirected to a
directory different than <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd()</a></code>. Note that various functions within
PacFIN.Utilities have different default values for this input argument. If
<code>NULL</code> in <code>writeComps</code>, then the resulting file name will be based on what
type of composition data is being generated, i.e., <code>PacFIN_lengths.out</code>,
or <code>PacFIN_ages.out</code> for length or age data, respectively.</p></dd>


<dt id="arg-abins-lbins">abins, lbins<a class="anchor" aria-label="anchor" href="#arg-abins-lbins"></a></dt>
<dd><p>Deprecated as of 0.2.10 to reduce complication in the code and
make it more intuitive for the user when running this function.
The binning structure to use for ages and lengths. For
both arguments, the default is <code>NULL</code> which leads to the natural bins of
the data being used, i.e., no additional binning is performed.</p></dd>


<dt id="arg-comp-bins">comp_bins<a class="anchor" aria-label="anchor" href="#arg-comp-bins"></a></dt>
<dd><p>The binning structure to use for ages and lengths. The default
is <code>NULL</code> which leads to the natural bins of the data being used, i.e.,
no additional binning is performed.</p></dd>


<dt id="arg-column-with-input-n">column_with_input_n<a class="anchor" aria-label="anchor" href="#arg-column-with-input-n"></a></dt>
<dd><p>A string providing the column name with the
appropriate value for the input sample size that will be given to Stock
Synthesis as input_n (what we and nwfscSurvey provide as a column name)
or NSamp (what Stock Synthesis wants as a name). The default is <code>"n_tows"</code>,
which is the number of tows that were performed for the given
stratifications passed to <code><a href="getComps.html">getComps()</a></code> that created <code>inComps</code>. One might
want to use <code>"n_fish"</code> or some column that you created yourself.</p></dd>


<dt id="arg-maxage">maxAge<a class="anchor" aria-label="anchor" href="#arg-maxage"></a></dt>
<dd><p>Deprecated as of 0.2.10 to reduce complication in the code and
make it more intuitive for the user when running this function. All fish
present in <code>inComps</code> will be binned according to the bins provided or the
bins present.</p></dd>


<dt id="arg-month">month<a class="anchor" aria-label="anchor" href="#arg-month"></a></dt>
<dd><p>Month for all observations. Defaults to 7. If input has multiple
seasons, this must be a vector of equal length to the maximum seasons where
the order of months in the vector will be assigned to season in ascending
order. For example, if there  are two seasons and the month = c(1, 7)
season 1 will be assigned to month 1 and season 2 to month 7.</p></dd>


<dt id="arg-partition">partition<a class="anchor" aria-label="anchor" href="#arg-partition"></a></dt>
<dd><p>Used by Stock Synthesis for length- or age-composition data
where 0 = retained + discarded, 1 = discarded, and 2 = retained fish. The
default is to assume that these fish are retained only. The default was
changed in 2020 from a value of 0, and code should be updated accordingly
if you really want 0.</p></dd>


<dt id="arg-ageerr">ageErr<a class="anchor" aria-label="anchor" href="#arg-ageerr"></a></dt>
<dd><p>Defaults to 1 to use the first ageing error matrix specified in
your Stock Synthesis model.</p></dd>


<dt id="arg-dummybins">dummybins<a class="anchor" aria-label="anchor" href="#arg-dummybins"></a></dt>
<dd><p>Deprecated as of version 0.2.10 because you can just run the
function with different <code>abins</code> or <code>lbins</code> rather than this function
changing the first and end bin for you. The original default, years ago was
<code>TRUE</code>, then it was changed to <code>FALSE</code>. Now, without this argument, it is
essentially <code>FALSE</code>.</p></dd>


<dt id="arg-sum-">sum1<a class="anchor" aria-label="anchor" href="#arg-sum-"></a></dt>
<dd><p>Deprecated as of version 0.2.10 because SS3 will normalize the
composition data for you and thus it does not need to be done here. The
previous default was <code>FALSE</code> so the removal of this argument does not
change the default behavior of this function.</p></dd>


<dt id="arg-digits">digits<a class="anchor" aria-label="anchor" href="#arg-digits"></a></dt>
<dd><p>Integer indicating the number of decimal places to round value
to (value is passed to <code><a href="https://rdrr.io/r/base/Round.html" class="external-link">round()</a></code>). The default is 4, which will lead to
rounding to four digits. If you do not want to round the results, then use
<code>Inf</code>, which will lead to the use of R's default precision.</p></dd>


<dt id="arg-overwrite">overwrite<a class="anchor" aria-label="anchor" href="#arg-overwrite"></a></dt>
<dd><p>Deprecated as of version 0.2.10. The file will be
automatically overwritten if present.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>A logical specifying if output should be written to the
screen or not. Good for testing and exploring your data but can be turned
off when output indicates information that you already know. The printing
of output to the screen does not affect any of the returned objects. The
default is to always print to the screen, i.e., <code>verbose = TRUE</code>.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A data frame is returned and a <code>.csv</code> is created and written to the disk with
the same data frame.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The structure of the input dataframe determines whether the results
produce age- or length-composition data. As of version 0.2.10, conditional
age-at-length compositions are no longer available within this function.</p>
<p>Composition data are raw weights rather than proportions. Stock Synthesis
internally converts these to proportions.  The raw weights should be
examined for anomalies. To create proportions use <code><a href="https://rdrr.io/r/base/proportions.html" class="external-link">prop.table()</a></code> on the
columns containing composition data.</p>
<p>The columns in the output preceding 'lengthcm' or 'Age' are those that
were used in stratifying the data.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index">
<ul><li><p><code><a href="getComps.html">getComps()</a></code></p></li>
</ul></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Andi Stephens, Chantel R. Wetzel, Kelli F. Johnson, Ian G. Taylor</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Kelli F. Johnson, Chantel R. Wetzel.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

