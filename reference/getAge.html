<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get age information for each fish — getAge • PacFIN.Utilities</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get age information for each fish — getAge"><meta property="og:description" content="Get age information for each fish, or row of the data. This functionality was
originally in cleanAges(), moved to cleanPacFIN(), and is now
compartmentalized here, but called in cleanPacFIN() and stored in the Age
column."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">PacFIN.Utilities</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get age information for each fish</h1>
    
    <div class="hidden name"><code>getAge.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Get age information for each fish, or row of the data. This functionality was
originally in <code><a href="PacFIN.Utilities-deprecated.html">cleanAges()</a></code>, moved to <code><a href="cleanPacFIN.html">cleanPacFIN()</a></code>, and is now
compartmentalized here, but called in <code><a href="cleanPacFIN.html">cleanPacFIN()</a></code> and stored in the <code>Age</code>
column.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">getAge</span><span class="op">(</span><span class="va">Pdata</span>, verbose <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">keep</span>, col.bestage <span class="op">=</span> <span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="https://lifecycle.r-lib.org/reference/deprecated.html" class="external-link">deprecated</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>Pdata</dt>
<dd><p>A data frame of biological samples
originating from the
Pacific Fishieries Information Network (PacFIN) data warehouse,
which originated in 2014. Data are pulled using sql calls, see
<code><a href="PullBDS.PacFIN.html">PullBDS.PacFIN</a>()</code>.</p></dd>


<dt>verbose</dt>
<dd><p>A logical specifying if output should be written to the
screen or not. Good for testing and exploring your data but can be turned
off when output indicates information that you already know. The printing
of output to the screen does not affect any of the returned objects. The
default is to always print to the screen, i.e., <code>verbose = TRUE</code>.</p></dd>


<dt>keep</dt>
<dd><p>A vector of strings, integers, <code>NA</code>, and empty strings (e.g.,
<code>""</code>) representing the <code>AGE_METHOD</code>s you want to keep. All entries will be
converted to character values using <code><a href="codify_age_method.html">codify_age_method()</a></code>. To keep the best
age for a given row, at least one of the ageing methods needs to have been
performed using one of the methods present in this argument. Often, it is
helpful to run <code><a href="getAgeMethod.html">getAgeMethod()</a></code> on the relevant data prior to running this
function to see what age methods are currently present.</p></dd>


<dt>col.bestage</dt>
<dd><p>Deprecated in version 0.2.5.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A vector of integer ages in years the same length as the number of rows
present in <code>Pdata</code>.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    
<div class="section">
<h3 id="fish-age-years-final"><code>FISH_AGE_YEARS_FINAL</code><a class="anchor" aria-label="anchor" href="#fish-age-years-final"></a></h3>


<p><code>FISH_AGE_YEARS_FINAL</code> is defined in PacFIN as the ``age of specimen (best
age or final age)''. If <code>FISH_AGE_YEARS_FINAL</code> does not have an entry, where
this should be the best age available, then the user is warned that they
should potentially look at the age reads from an individual reader, e.g.,
`age1` or `age2`, until the state works out what age read is best and
provides this in `FISH_AGE_YEARS_FINAL`.</p>
<p>How <code>FISH_AGE_YEARS_FINAL</code> is determined can be unclear because it does not
always equal the value from one of the age readers. How the value is
determined is specific to the lab that conducted the ageing. Sometimes,
reconciling multiple age reads to determine the best age will lead to the
final age not equaling any of the individual age reads. For example, readers
can get together to determine the best read. We assume that those who
populated the column know what they are doing; but, please feel free to
report errors in PacFIN to GitHub issues or the package maintainer after
contacting the state representative.</p>
<p>Ageing methods listed in keep (or derivatives of those) will be used to
filter for ages that are of desired method. Any age that was not estimated
using one of the desired methods will be replaced with an <code>NA</code>.</p><div class="section">
<h4 id="deprecated-methods">Deprecated methods<a class="anchor" aria-label="anchor" href="#deprecated-methods"></a></h4>


<p>Previously, <code>getAge()</code> averaged over multiple reads if there was no entry in
<code>FINAL_FISH_AGE_IN_YEARS</code>. This functionality has since been removed from the
package starting with version 0.2.6.</p>
</div>

<div class="section">
<h4 id="washington">Washington<a class="anchor" aria-label="anchor" href="#washington"></a></h4>


<p>Washington uses the following order of operations to assign the best age
given there are multiple reads. See <a href="http://www.github.com/pfmc-assessments/PacFIN.Utilities/issues/49" class="external-link">issue #49</a> for a
semi-detailed discussion. Note, that they will never report more than three
reads because that is the limitation of their database.</p><ul><li><p>age1 if only one read;</p></li>
<li><p>randomly chosen age between age-read 1 and age-read 2 if the difference
between the two reads is less than or equal to three;</p></li>
<li><p>if the difference between two reads is more than three, then the best age
is manually keyed in from that designated by a human;</p></li>
<li><p>if three reads are equal, then the value is automatically assigned; and</p></li>
<li><p>if there are three reads and they are not equal then an age reader must
choose the final value.</p></li>
</ul></div>

<div class="section">
<h4 id="oregon">Oregon<a class="anchor" aria-label="anchor" href="#oregon"></a></h4>


<p>Oregon employs a single age reader, or at least has since 2014. Twenty
percent of first reads are re-read by the same reader but without knowing any
information about the results of the first read.</p><ul><li><p>age1 if only one read;</p></li>
<li><p>age1 if age1 and age2 agree;</p></li>
<li><p>age3 if age1 and age2 do not agree, where age3 is not a blind read and the
reader knows the values reported in age1 and age2 when reading the otolith
for a third time.</p></li>
</ul></div>

<div class="section">
<h4 id="california">California<a class="anchor" aria-label="anchor" href="#california"></a></h4>


<p>Ageing of otoliths collected in California is performed by the Cooperative
Ageing Project, funded through a grant with the Pacific States Marine
Fisheries Commission. This same lab also ages the samples collected on the
coast-wide surveys as well as some of the samples collected by Oregon when
there are too many ages to read for their single age reader.</p><ul><li><p>age1 if only one read;</p></li>
<li><p>age1 if age1 and age2 agree;</p></li>
<li><p>for younger fish, i.e., less than or equal to age 10, discrepancies can
normally be resolved by looking at the otolith and having knowledge of both
previous reads;</p></li>
<li><p>for older fish, i.e., older than age 10, discrepancies are resolved and the
resolved age is used;</p></li>
<li><p>for older fish where the discrepancy cannot be resolved, age1 is used
because it had the freshest otolith and potentially used the better half.</p></li>
</ul></div>


</div>

    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Kelli F. Johnson</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Kelli F. Johnson, Chantel R. Wetzel.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

